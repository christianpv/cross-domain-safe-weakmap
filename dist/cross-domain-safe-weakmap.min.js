!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("xdsweakmap",[],t):"object"==typeof exports?exports.xdsweakmap=t():e.xdsweakmap=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(a);t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);Object.defineProperty(t,"WeakMap",{enumerable:!0,get:function(){return n.WeakMap}})},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WeakMap=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3),u=r(4),s=Object.defineProperty,o=Date.now()%1e9;t.WeakMap=function(){function e(){n(this,e),o+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+o,(0,u.hasNativeWeakMap)()&&(this.weakmap=new window.WeakMap),this.keys=[],this.values=[]}return a(e,[{key:"set",value:function(e,t){var r=this.weakmap;if(r)try{r.set(e,t)}catch(e){delete this.weakmap}if((0,i.isWindow)(e)){var n=this.keys,a=this.values,u=n.indexOf(e);u===-1?(n.push(e),a.push(t)):a[u]=t}else{var o=this.name,f=e[o];f&&f[0]===e?f[1]=t:s(e,o,{value:[e,t],writable:!0})}}},{key:"get",value:function(e){var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if((0,i.isWindow)(e)){var r=this.keys,n=r.indexOf(e);if(n===-1)return;return this.values[n]}var a=e[this.name];if(a&&a[0]===e)return a[1]}},{key:"delete",value:function(e){var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if((0,i.isWindow)(e)){var r=this.keys,n=r.indexOf(e);n!==-1&&(r.splice(n,1),this.values.splice(n,1))}else{var a=e[this.name];a&&a[0]===e&&(a[0]=a[1]=void 0)}}},{key:"has",value:function(e){var t=this.weakmap;if(t)try{return t.has(e)}catch(e){delete this.weakmap}if((0,i.isWindow)(e))return this.keys.indexOf(e)!==-1;var r=e[this.name];return!(!r||r[0]!==e)}}]),e}()},function(e,t){"use strict";function r(e){if(n.indexOf(e)!==-1)return!0;try{if(e&&e.self===e)return n.push(e),!0}catch(e){}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.isWindow=r;var n=[]},function(e,t){"use strict";function r(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,t={},r="__testvalue__";return window.Object.freeze(t),e.set(t,r),e.get(t)===r}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasNativeWeakMap=r}])});
//# sourceMappingURL=cross-domain-safe-weakmap.min.js.map